upstream backend {
  server localhost:3000;
}

server {
  server_name localhost;
  listen 80;

  set $mobile_rewrite do_not_perform;

  if ($http_user_agent ~ "Mobile") {
    set $mobile_rewrite perform;
  }

  if ($mobile_rewrite = perform) {
    rewrite ^/(.*) $scheme://10.0.0.189$request_uri;
  }

  location / {
    proxy_set_header HOST $host;
    proxy_set_header X-Forwarded-Proto $scheme;
    proxy_set_header X-Real-IP $remote_addr;
    proxy_set_header X-Forwarded-For $proxy_add_x_forwarded_for;
    proxy_pass http://backend;
  }

}

server {
  server_name 10.0.0.189;
  listen 80;

  location / {
    proxy_set_header HOST $host;
    proxy_set_header X-Forwarded-Proto $scheme;
    proxy_set_header X-Real-IP $remote_addr;
    proxy_set_header X-Forwarded-For $proxy_add_x_forwarded_for;
    proxy_pass http://backend;
  }

}



// Important when testing on mobile device make sure your laptop is is on the same connection, 
  AND when you make changes to the nginx server restart the computer or the whole server 

Example 

wifi 10.0.0.189
wired 10.0.0.129

if your laptop is wired this configuration wont connect, switch to wifi or change the server to 129 but idk if that works

